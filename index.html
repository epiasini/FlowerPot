
<html>
<head>
<script src="fabric.js"> </script>
    		<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="papaparse.min.js" type="text/javascript"></script>

</head>        

<canvas id="c" width='800' height='800' style="border:1px solid"></canvas>
<script>
var canvas = new fabric.Canvas('c');
//canvas.setBackgroundImage('tempsnip.png')

var XYData = []
var XYActual = []
    
var imgElement = document.getElementById('my-image');
var imgInstance = new fabric.Image(imgElement, {
  left: 0,
  top: 0,
  angle: 0,
  opacity: 1
});
//canvas.add(imgInstance);
base_top = new fabric.Line([350,350,450,350],{
    strokeWidth: 5,
    fill: 'red',
    stroke: 'red',
  });

horizontal_top = new fabric.Line([250,350,550,350],{
    strokeWidth: 5,
    fill: 'red',
    stroke: 'red',
  });


vertical_top = new fabric.Line([400,250,400,350],{
    strokeWidth: 5,
    fill: 'red',
    stroke: 'red',
  });

    
point_top = new fabric.Circle({
        radius: 4,
        fill: 'red',
        left: 400,
        top: 350,
        });
 var line_top = new fabric.Path('M 65 0 Q 100, 100, 200, 0', { fill: '', stroke: 'red', objectCaching: false, strokeWidth: 5 });

    line_top.path[0][1] = 150;
    line_top.path[0][2] = 100;

    line_top.path[1][1] = 200;
    line_top.path[1][2] = 400;

    line_top.path[1][3] = 250;
    line_top.path[1][4] = 100;

    line_top.selectable = false;
 
    
base_bottom = new fabric.Line([350,450,450,450],{
    strokeWidth: 5,
    fill: 'red',
    stroke: 'red',
  });

    
horizontal_bottom = new fabric.Line([250,450,550,450],{
    strokeWidth: 5,
    fill: 'red',
    stroke: 'red',
  });
    
vertical_bottom = new fabric.Line([400,450,400,550],{
    strokeWidth: 5,
    fill: 'red',
    stroke: 'red',
  });
    
point_bottom = new fabric.Circle({
        radius: 4,
        fill: 'red',
        left: 400,
        top: 450,
        });
    
canvas.add(base_top, base_bottom, horizontal_bottom, horizontal_top, point_bottom, point_top, vertical_top, vertical_bottom)

 var line = new fabric.Path('M 65 0 Q 100, 100, 200, 0', { fill: '', stroke: 'red', objectCaching: false, strokeWidth: 5 });

    line.path[0][1] = 150;
    line.path[0][2] = 100;

    line.path[1][1] = 200;
    line.path[1][2] = 400;

    line.path[1][3] = 250;
    line.path[1][4] = 100;

    line.selectable = false;
    canvas.add(line);    
 
    function Observationloader(){
   
    XYData = $ .get(`pixelvalues.csv`, function(){
   XYActual = Papa.parse(XYData.responseText, {
	   dynamicTyping: true
   })
})
    }
    Observationloader()
var rw = 0
function LoadBalls(){
        var ball_1 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left:  XYActual.data[rw][0],
        top: XYActual.data[rw][1],
        });
    
        var ball_2 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][2],
        top: XYActual.data[rw][3],
        });
        
        var ball_3 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][4],
        top: XYActual.data[rw][5],
        });
        
        var ball_4 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][6],
        top: XYActual.data[rw][7],
        });
		
        var ball_5 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][8],
        top: XYActual.data[rw][9],
        });
		
        var ball_6 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][10],
        top: XYActual.data[rw][11],
        });
		
        var ball_7 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][12],
        top: XYActual.data[rw][13],
        });
		
        var ball_8 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][14],
        top: XYActual.data[rw][15],
        });
		
        var ball_9 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][16],
        top: XYActual.data[rw][17],
        });
		
        var ball_10 = new fabric.Circle({
        radius: 2,
        fill: 'black',
        left: XYActual.data[rw][18],
        top: XYActual.data[rw][19],
        });

    canvas.add(ball_1, ball_2, ball_3, ball_4, ball_5, ball_6, ball_7, ball_8, ball_9, ball_10)

    
}
function NextSlide() {
    rw = rw + 1
    canvas.clear()
    switch(XYActual.data[rw][20]){
        case 0:
        canvas.add(horizontal_bottom)
        canvas.add(base_top)
    
        break;
        case 1:
        canvas.add(horizontal_top)
        canvas.add(base_top)
    
        break;
    }
    LoadBalls()
}    
</script>
<button onclick="LoadBalls()">Click to Start</button>
<button onclick="NextSlide()">Next Trial</button>

</html>